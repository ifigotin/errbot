Installation
============

Foreword
--------

This installation guide is tailored specifically towards Debian/Ubuntu Linux
as that is our recommended platform to run Errbot on.
If you are on another Linux distribution,
99% of this guide will apply to you as well
but you will have to change some commands
(you will be using another package manager
and some package names will differ).

If you are not on Linux you are mostly on your own,
however errbot is a pure Python program
which runs under Python 2.7 and Python 3.2+ on Linux, \*BSD, Windows and Mac,
so you should always be able to `pip install errbot`.
There should be many resources on getting `pip` working for your platform
(as well as `virtualenv`, which is highly recommended!).

What follows is a complete, step-by-step guide to setting up Errbot
under a dedicated user account within a Python virtualenv.
At the end we will also configure systemd (or upstart) to run errbot as a system service.


Prerequisites
-------------

You need to have registered a user for the bot to use on the chat network that you wish to run Errbot on.
A lot of plugins use multi user chatrooms (MUC) as well,
so it is recommended (but not required) to have a least one MUC for Errbot to use as well.

Help on setting up errbot for your specific chat network will follow later,
when we get to <Configuration> !!!FIXME: Link to configuration here!!!.

You will also need to have root access on the system where you are installing errbot
in order to install some necessary system packages
and to create a dedicated user account for the bot.


Install dependencies
--------------------

We must first install some packages so that we can install errbot itself::

    apt-get install -y python3 python3-dev python3-pip python-virtualenv build-essential libssl-dev libffi-dev

Or if you wish to use Python 2.7 instead of Python 3::

    apt-get install -y python python-dev python-pip python-virtualenv build-essential libssl-dev libffi-dev


Create a user account
---------------------

Now setup a dedicated user account for the bot::

    useradd --home /opt/errbot --create-home --system --shell /bin/bash --comment "System account for errbot"

And change to this new user account::

    sudo -H -s -u errbot


Install errbot
--------------

First, we will setup a Python virtualenv so we can install packages in isolation (make sure you changed to the `errbot` user in the previous step)::

    virtualenv --python /usr/bin/python3 /opt/errbot/venv

Or if you wish to use Python 2.7 instead of Python 3::

    virtualenv --python /usr/bin/python2 /opt/errbot/venv

Next, install errbot itself::

    /opt/errbot/venv/bin/pip install errbot

If you wish to install the latest, bleeding edge development version, you can do that too::

    /opt/errbot/venv/bin/pip install https://github.com/errbotio/errbot/archive/master.zip

You'll also need to install some extra dependencies for the specific backend you're wanting to use.

* For XMPP: `/opt/errbot/venv/bin/pip install sleekxmpp pyasn1 pyasn1-modules`
* For HipChat: `/opt/errbot/venv/bin/pip install sleekxmpp pyasn1 pyasn1-modules hypchat`
* For IRC: `/opt/errbot/venv/bin/pip install irc`
* For Slack: `/opt/errbot/venv/bin/pip install slackclient`
* For Telegram: `/opt/errbot/venv/bin/pip install python-telegram-bot`

..note::
    If you're using a third-party backend,
    refer to its own documentation for which extra packages to install.

Congratulations!
We're now ready to continue configuring the bot for a first-time startup.
